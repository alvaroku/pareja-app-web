<div class="px-4 py-6">
  <h2 class="text-2xl font-bold mb-6">Memorias</h2>

  @if (errorMessage) {
    <div class="mb-4 p-3 bg-red-500/20 backdrop-blur-sm rounded-lg border border-red-400/50">
      <p class="text-red-100 text-sm">{{ errorMessage }}</p>
    </div>
  }

  <div class="mb-6">
    <button
      (click)="openCreateModal()"
      class="w-full py-3 bg-white text-purple-600 font-bold rounded-xl hover:bg-white/90 transition-all shadow-lg">
      Nueva Memoria
    </button>
  </div>

  <div class="grid grid-cols-2 gap-3">
    @if (memorias.length === 0) {
      <div class="col-span-2 text-center py-8 text-white/70">
        <p>No tienes memorias registradas</p>
      </div>
    }

    @for (memoria of memorias; track memoria.id) {
      <div class="bg-white/20 backdrop-blur-lg rounded-xl overflow-hidden shadow-xl">
        <div class="h-40 relative">
          @if (memoria.resource) {
            <img
              [src]="memoria.resource.urlPublica"
              [alt]="memoria.titulo"
              class="w-full h-full object-cover"
            />
          } @else {
            <div class="w-full h-full bg-gradient-to-br from-pink-300 to-purple-300 flex items-center justify-center">
              <span class="text-4xl opacity-70"></span>
            </div>
          }
        </div>

        <div class="p-3">
          <h3 class="font-semibold text-sm mb-1">{{ memoria.titulo }}</h3>
          @if (memoria.descripcion) {
            <p class="text-xs opacity-70 mb-2 line-clamp-2">{{ memoria.descripcion }}</p>
          }
          <p class="text-xs opacity-70">{{ formatDate(memoria.fechaMemoria) }}</p>
          @if (!isMiMemoria(memoria)) {
            <p class="text-xs text-purple-900 mt-1">Creada por tu pareja</p>
          }

          <div class="flex gap-2 mt-3">
            <button
              (click)="openEditModal(memoria)"
              class="flex-1 px-3 py-1.5 bg-white/20 rounded-lg text-xs hover:bg-white/30 transition-all">
              Editar
            </button>
            <button
              (click)="deleteMemoria(memoria)"
              class="flex-1 px-3 py-1.5 bg-red-500/30 rounded-lg text-xs hover:bg-red-500/50 transition-all">
              Eliminar
            </button>
          </div>
        </div>
      </div>
    }
  </div>
</div>
