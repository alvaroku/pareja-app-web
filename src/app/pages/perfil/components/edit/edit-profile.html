<!-- Overlay -->
<div class="overlay fixed inset-0 bg-black/50 backdrop-blur-sm  flex items-center justify-center p-4">
  <!-- Modal -->
  <div class="bg-white/20 backdrop-blur-lg rounded-2xl p-6 shadow-xl max-w-md w-full" (click)="$event.stopPropagation()">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold">Editar Perfil</h3>
      <button (click)="closeModal()" class="text-2xl hover:opacity-70">&times;</button>
    </div>

    <form [formGroup]="editForm" (ngSubmit)="onSubmit()" class="space-y-4">
      @if (errorMessage) {
        <div class="p-3 bg-red-500/20 backdrop-blur-sm rounded-lg border border-red-400/50">
          <p class="text-red-100 text-sm">{{ errorMessage }}</p>
        </div>
      }

      <div>
        <label class="block text-sm font-semibold mb-2">Nombre</label>
        <input
          type="text"
          formControlName="nombre"
          [class.ring-2]="submitted && f['nombre'].errors"
          [class.ring-red-400]="submitted && f['nombre'].errors"
          class="w-full px-4 py-3 rounded-xl bg-white/30 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"
          placeholder="Tu nombre">
        @if (submitted && f['nombre'].errors) {
          <div class="mt-2">
            @if (f['nombre'].errors['required']) {
              <p class="text-red-200 text-sm">El nombre es requerido</p>
            }
            @if (f['nombre'].errors['minlength']) {
              <p class="text-red-200 text-sm">El nombre debe tener al menos 3 caracteres</p>
            }
          </div>
        }
      </div>

      <div>
        <label class="block text-sm font-semibold mb-2">Email</label>
        <input
          type="email"
          formControlName="email"
          [class.ring-2]="submitted && f['email'].errors"
          [class.ring-red-400]="submitted && f['email'].errors"
          class="w-full px-4 py-3 rounded-xl bg-white/30 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"
          placeholder="tu@email.com">
        @if (submitted && f['email'].errors) {
          <div class="mt-2">
            @if (f['email'].errors['required']) {
              <p class="text-red-200 text-sm">El email es requerido</p>
            }
            @if (f['email'].errors['email']) {
              <p class="text-red-200 text-sm">El email no es válido</p>
            }
          </div>
        }
      </div>

      <div class="grid grid-cols-3 gap-3">
        <div>
          <label class="block text-sm font-semibold mb-2">Código</label>
          <select
            formControlName="codigoPais"
            class="w-full px-2 py-3 rounded-xl bg-white/30 backdrop-blur-sm text-white focus:outline-none focus:ring-2 focus:ring-white/50">
            <option value="" class="bg-purple-600">-</option>
            <option value="+1" class="bg-purple-600">+1</option>
            <option value="+52" class="bg-purple-600">+52</option>
            <option value="+34" class="bg-purple-600">+34</option>
            <option value="+54" class="bg-purple-600">+54</option>
            <option value="+55" class="bg-purple-600">+55</option>
            <option value="+57" class="bg-purple-600">+57</option>
            <option value="+58" class="bg-purple-600">+58</option>
          </select>
        </div>
        <div class="col-span-2">
          <label class="block text-sm font-semibold mb-2">Teléfono</label>
          <input
            type="tel"
            formControlName="telefono"
            class="w-full px-4 py-3 rounded-xl bg-white/30 backdrop-blur-sm text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-white/50"
            placeholder="1234567890">
        </div>
      </div>

      <div class="flex gap-3 pt-4">
        <button
          type="button"
          (click)="closeModal()"
          class="flex-1 py-3 bg-white/20 text-white font-semibold rounded-xl hover:bg-white/30 transition-all">
          Cancelar
        </button>
        <button
          type="submit"
          class="flex-1 py-3 bg-white text-purple-600 font-bold rounded-xl hover:bg-white/90 transition-all shadow-lg">
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
