<div class="px-4 py-6">
  <h2 class="text-2xl font-bold mb-6">Metas de Pareja</h2>

  @if (errorMessage) {
    <div class="mb-4 p-3 bg-red-500/20 backdrop-blur-sm rounded-lg border border-red-400/50">
      <p class="text-red-100 text-sm">{{ errorMessage }}</p>
    </div>
  }

  <div class="mb-6">
    <button
      (click)="openCreateModal()"
      class="w-full py-3 bg-white text-purple-600 font-bold rounded-xl hover:bg-white/90 transition-all shadow-lg">
      Nueva Meta
    </button>
  </div>

  <div class="space-y-4">
    @if (metas.length === 0) {
      <div class="text-center py-8 text-white/70">
        <p>No tienes metas registradas</p>
      </div>
    }

    @for (meta of metas; track meta.id) {
      <div class="bg-gradient-to-r rounded-2xl p-4 shadow-xl" [ngClass]="getEstadoClass(meta.estado)">
        <div class="flex items-start justify-between mb-2">
          <div class="flex-1">
            <h3 class="font-semibold text-lg">{{ meta.titulo }}</h3>
            @if (!isMiMeta(meta)) {
              <p class="text-xs text-purple-900 mt-1">Creada por tu pareja</p>
            }
          </div>
          <span class="text-xs bg-white/40 px-2 py-1 rounded-full">{{ getEstadoNombre(meta.estado) }}</span>
        </div>
        <p class="text-sm opacity-90 mb-3">{{ meta.descripcion || 'Sin descripciÃ³n' }}</p>
        <div class="w-full bg-white/30 rounded-full h-2">
          <div class="bg-white h-2 rounded-full transition-all" [style.width.%]="meta.progreso"></div>
        </div>
        <p class="text-xs mt-2 opacity-80">{{ meta.progreso }}% completado</p>

        <div class="flex gap-2 mt-3">
          <button
            (click)="openEditModal(meta)"
            class="px-4 py-2 bg-white/20 rounded-lg text-sm hover:bg-white/30">
            Editar
          </button>
          <button
            (click)="deleteMeta(meta.id)"
            class="px-4 py-2 bg-red-500/30 rounded-lg text-sm hover:bg-red-500/50">
            Eliminar
          </button>
        </div>
      </div>
    }
  </div>
</div>
